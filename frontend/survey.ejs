<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Survey</title>
</head>

<body onload="onload('<%= questions %>')">
    <h1>
        <%= title %>
    </h1>
    <ol>
        <% questions.forEach(question=> { %>
            <li>
                <form>
                    <label>
                        <%= question.question %>
                    </label><br>
                    <% if(question.answer_type=='text' ){ %>
                        <input type="text" placeholder="answer"
                            onchange="addAnswer('<%= question.id  %>', event.target.value)">
                        <% }else if(question.answer_type=='yes-no' ){ %>
                            <input type="radio" name="<%= question.id  %>"
                                onchange="addAnswer('<%= question.id  %>', 'yes')"> yes
                            <input type="radio" name="<%= question.id  %>"
                                onchange="addAnswer('<%= question.id  %>', 'no')"> no
                            <% } %>
                </form>
            </li>
            <% }); %>
    </ol>
    <% if(isCreator){ %>
        <button onclick="editSurveyButClicked('<%= survey_id %>');" />Edit Survey ğŸ“
        <button id="copyShareLinkBut"
            onclick="copyShareLinkButtonClicked('http://localhost:3000/survey?isCreator=false&surveyid=<%= survey_id %>')">Copy
            Share Link ğŸ“‹
        </button>
        <button id="viewResponsesButton" onclick="location.href = 'survey-responses?survey_id=<%= survey_id %>'">Responses ğŸ“²</button>
        <span id="copiedAlert" hidden>copiedâœ”</span>
        <% }else{ %>
            <input type="text" placeholder="enter your name" onchange="onTakerNameChanged(event.target.value)">
            <button id="submitAnswersButton" disabled onclick="submitAnswerButClicked('<%= survey_id %>');">Submit Answers</button>
            <span hidden id="submittedText">Submitted âœ”</span>
            <% } %>
                <script src="https://code.jquery.com/jquery-3.7.1.js"
                    integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
                <script src="survey.js" charset="UTF-8"></script>
</body>

</html>